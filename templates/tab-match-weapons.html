
<style type="text/css" media="screen">

.weaponcardimg{
	height:150px;
	object-fit: contain;
}

</style>

<style type="text/css" media="screen">
.wrapper {
	display: flex;
	width:100%;
}


.wrapped {
	flex-basis: 100%;
}

#chartcontainer-match-weapons {
	height: 300px;
}


</style>

<div id="chartcontainer-match-weapons"> </div>

<script charset="utf-8">


	Highcharts.chart('chartcontainer-match-weapons', {
	chart: {
		type: 'packedbubble',
		height: 300,
	},
	title: null,
	tooltip: {
		useHTML: true,
		pointFormat: '<b>{point.name}:</b> {point.value}'
	},
	plotOptions: {
		packedbubble: {
			minSize: '20%',
			maxSize: '100%',
			layoutAlgorithm: {
				gravitationalConstant: 0.05,
				splitSeries: true,
				seriesInteraction: false,
				dragBetweenSeries: true,
				parentNodeLimit: true
			},
			dataLabels: {
				enabled: true,
				format: '{point.name}',
				filter: {
					property: 'y',
					operator: '>',
					value: 250
				},
				style: {
					color: 'black',
					textOutline: 'none',
					fontWeight: 'normal'
				}
			}
		}
	},
	series: [
	{
	//TODO use real data
		name: 'Weapon 1',
		data: [
		{ name: 'Player 1',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 2',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 3',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 4',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 5',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 6',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 7',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 8',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 9',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 10',  value: Math.floor(Math.random() * 11) },
		]
	},
	{
		name: 'Weapon 2',
		data: [
		{ name: 'Player 1',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 2',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 3',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 4',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 5',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 6',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 7',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 8',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 9',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 10',  value: Math.floor(Math.random() * 11) },
		]
	},
	{
		name: 'Weapon 3',
		data: [
		{ name: 'Player 1',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 2',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 3',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 4',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 5',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 6',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 7',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 8',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 9',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 10',  value: Math.floor(Math.random() * 11) },
		]
	},
	{
		name: 'Weapon 4',
		data: [
		{ name: 'Player 1',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 2',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 3',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 4',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 5',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 6',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 7',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 8',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 9',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 10',  value: Math.floor(Math.random() * 11) },
		]
	},
	{
		name: 'Weapon 5',
		data: [
		{ name: 'Player 1',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 2',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 3',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 4',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 5',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 6',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 7',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 8',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 9',  value: Math.floor(Math.random() * 11) },
		{ name: 'Player 10',  value: Math.floor(Math.random() * 11) },
		]
	},
	]
});

</script>
<script id="matchWeaponTemplateCard" type="text/x-jsrender">
		
</script>

<script id="matchWeaponTemplate" type="text/x-jsrender">

{{for weapons}}


<div class="card blue-grey lighten-5">
	<div class="card-image">
		<img class="weaponcardimg" src="/public/img/weapons/{{:name}}.jpg" >
		<span class="card-title black-text">{{:name}}</span>
	</div>
	<div class="card-tabs">
		<ul class="tabs tabs-fixed-width orange-text blue-grey lighten-5">
			<li class="tab"><a href="#tab-weapon-{{:#index}}-kills"> <span class="orange-text">Kills</span></a></li>
			<li class="tab"><a href="#tab-weapon-{{:#index}}-accuracy"> <span class="orange-text">Accuracy</span></a></li>
			<li class="tab"><a href="#tab-weapon-{{:#index}}-headshots"> <span class="orange-text">Headshots</span></a></li>
			<li class="tab"><a href="#tab-weapon-{{:#index}}-damage"> <span class="orange-text">Damage</span></a></li>
		</ul>
	</div>


	<div class="card-content  blue-grey lighten-4">
		<div id="tab-weapon-{{:#index}}-kills">
			{{include address tmpl="#matchWeaponTemplateCard"/}}
			<div class="row">
				<div class="container red">
					<div class="row">
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for kills.clan}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for kills.enemy}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="tab-weapon-{{:#index}}-accuracy">
			{{include address tmpl="#matchWeaponTemplateCard"/}}
			<div class="row">
				<div class="container green">
					<div class="row">
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for accuracy.clan}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for accuracy.enemy}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="tab-weapon-{{:#index}}-headshots">
			{{include address tmpl="#matchWeaponTemplateCard"/}}
			<div class="row">
				<div class="container yellow">
					<div class="row">
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for headshots.clan}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for headshots.enemy}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="tab-weapon-{{:#index}}-damage">
			{{include address tmpl="#matchWeaponTemplateCard"/}}
			<div class="row">
				<div class="container pink">
					<div class="row">
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for damage.clan}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
						<div class="col s6">
							<table style="table-layout: fixed ; width: 100% ;" >
								{{for damage.enemy}}
								<tr>
									<td style="width: 50%;" class="right-align">{{:name}}</td>
									<td class="orange-text left-align">{{:amount}}</td>
								</tr>
								{{/for}}
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{{/for}}
</script>



<div id="weaponscontainer"> </div>

<script charset="utf-8">
$(document).ready(function(){

	// TODO use correct id
	var url = "/api/matchinfo/1/weapons"
	$.getJSON(url,  function( data) {

				$("#weaponscontainer").append( $.templates( "#matchWeaponTemplate" ).render(data) );
			    $("#weaponscontainer").find('.tabs').tabs();
			});


				//$( "#matchWeaponTemplate" ).tmpl(data.weapons).appendTo( "#todo" );

//		scoreboardChart.categories = arrPlayers;
//
//        scoreboardChart.xAxis[0].setCategories(arrPlayers); //setting category
//		scoreboardChart.series[0].setData(arrKills);
//		scoreboardChart.series[1].setData(arrDeaths);
//		scoreboardChart.series[2].setData(arrAssists);

		//https://api.highcharts.com/class-reference/Highcharts.Chart.html#addSeries
		// https://api.highcharts.com/class-reference/Highcharts.Series#setData


  // Or with jQuery


});


</script>

<script charset="utf-8">
	
</script>

